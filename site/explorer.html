<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Explorer â€” People of the Medieval Levant</title>
  <link rel="icon" type="image/png" href="./assets/logo.png" />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header>
    <div class="header-inner" style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem;">
      <a href="./index.html" style="display:inline-flex;flex-shrink:0;"><img src="./assets/logo.png" alt="Outremer" style="width:44px;height:44px;object-fit:contain;border-radius:8px;" /></a>
      <div>
        <h1>Voyagers â†’ Outremer</h1>
        <p class="subtitle">
          <a href="./index.html" style="color:rgba(255,255,255,.7);text-decoration:none;">â† Project</a>
          &nbsp;Â·&nbsp; Explorer
          &nbsp;Â·&nbsp; <a href="./people.html" style="color:rgba(255,255,255,.7);text-decoration:none;">ğŸ‘¤ People</a>
          &nbsp;Â·&nbsp; <a href="./stats.html" style="color:rgba(255,255,255,.7);text-decoration:none;">ğŸ“Š Stats</a>
          &nbsp;Â·&nbsp; <a href="./upload.html" style="color:rgba(255,255,255,.7);text-decoration:none;">Contribute a Source</a>
        </p>
      </div>
      <div id="scholarBadge" style="font-size:.82rem;color:rgba(255,255,255,.8);cursor:pointer;" title="Click to change your display name">
        ğŸ‘¤ <span id="scholarNameDisplay">Anonymous</span>
      </div>
    </div>
  </header>

  <main>
    <!-- Document selector -->
    <section class="panel" id="panel-docs">
      <h2>Documents</h2>
      <div class="row gap">
        <select id="docSelect"></select>
        <button id="loadBtn" class="btn-primary">Load</button>
      </div>
      <div id="docMeta" class="meta-block mono"></div>
    </section>

    <!-- Extracted persons -->
    <section class="panel" id="panel-persons">
      <h2>Extracted Persons <span id="personCount" class="badge"></span></h2>
      <div id="persons" class="card-grid"></div>
    </section>

    <!-- Links + adjudication -->
    <section class="panel" id="panel-links">
      <h2>Links: Voyagers â†’ Outremer</h2>

      <!-- Stats bar -->
      <!-- Scholar name prompt (shown once on first visit) -->
      <div id="namePrompt" class="name-prompt hidden">
        ğŸ‘¤ You're contributing anonymously. Add your name so your decisions are credited.
        <input id="nameInput" type="text" placeholder="Your name or initials" maxlength="60" />
        <button id="nameSaveBtn" class="btn-small">Save</button>
        <button id="nameDismissBtn" class="btn-small">Stay anonymous</button>
      </div>

      <div id="statsBar" class="stats-bar hidden">
        <span id="statReviewed"></span>
        <span class="sep">Â·</span>
        <span id="statAccepted" class="stat-accepted">âœ… <span id="statAcceptedN">0</span> accepted</span>
        <span class="sep">Â·</span>
        <span id="statRejected" class="stat-rejected">âŒ <span id="statRejectedN">0</span> rejected</span>
        <span class="sep">Â·</span>
        <span id="statFlagged" class="stat-flagged">ğŸš© <span id="statFlaggedN">0</span> flagged</span>
        <button id="exportBtn"      class="btn-small">Export decisions (JSON)</button>
        <button id="exportTeiBtn"   class="btn-small">Export TEI-XML</button>
        <button id="exportJsonLdBtn"class="btn-small">Export JSON-LD</button>
      </div>

      <!-- Filter bar -->
      <div id="filterBar" class="filter-bar hidden">
        <span class="filter-label">Show:</span>
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="unreviewed">Unreviewed</button>
        <button class="filter-btn" data-filter="accepted">Accepted</button>
        <button class="filter-btn" data-filter="rejected">Rejected</button>
        <button class="filter-btn" data-filter="flagged">Flagged</button>
        <button class="filter-btn" data-filter="no_match">No match</button>
        <button class="filter-btn conflict-btn" data-filter="conflict">âš ï¸ Conflicts</button>
      </div>

      <div id="links" class="card-grid"></div>
    </section>

    <!-- Raw JSON -->
    <section class="panel" id="panel-raw">
      <h2>Raw JSON <button id="toggleRaw" class="btn-small">show</button></h2>
      <pre id="raw" class="mono hidden"></pre>
    </section>
  </main>

  <script type="module" src="./app.js"></script>
</body>
</html>
